from app.server.utils import read_config_from_yaml
from app.server.modules.file.malware import Malware
import glob

def load_malware_obj_from_yaml(malware_name) -> Malware:
    """
    Given a malware name, look for a malware config yaml file with that corresponding name
    Use the malware config to build a Malware obj
    return the Malware object
    """
    malware_config = glob.glob(f"app/game_configs/malware/{malware_name}.yaml")[0]
    # Read all malware configs from YAML config files
    malware_config_as_json = read_config_from_yaml(malware_config)
    if malware_config_as_json:
        return Malware(
                    **malware_config_as_json
                )
    else:
        return None
